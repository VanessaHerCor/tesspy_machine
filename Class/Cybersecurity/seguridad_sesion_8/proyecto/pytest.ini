[tool:pytest]
# Configuración para pruebas con Selenium

# Directorios donde buscar tests
testpaths = .

# Patrones de archivos de test
python_files = *test*.py selenium_*.py

# Patrones de clases de test
python_classes = Test* *TestSuite *Tests

# Patrones de funciones de test
python_functions = test_*

# Opciones por defecto
addopts = 
    -v
    --tb=short
    --strict-markers
    --strict-config
    --html=reports/report.html
    --self-contained-html
    --maxfail=5
    --timeout=300

# Marcadores personalizados
markers =
    smoke: Tests rápidos y críticos
    regression: Suite completa de regresión
    slow: Tests que toman más de 30 segundos
    ui: Tests de interfaz de usuario
    cross_browser: Tests que deben ejecutarse en múltiples navegadores
    login: Tests relacionados con autenticación
    file_upload: Tests de subida de archivos
    dynamic: Tests de contenido dinámico
    integration: Tests de integración E2E
    flaky: Tests que pueden fallar ocasionalmente

# Configuración de logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Configuración de archivos de log
log_file = reports/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d %(funcName)s(): %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Timeout para tests individuales (en segundos)
timeout = 120

# Configuración de warnings
filterwarnings =
    ignore::urllib3.exceptions.InsecureRequestWarning
    ignore::DeprecationWarning
    ignore:.*selenium.*:DeprecationWarning

# Variables de entorno para tests
env = 
    SELENIUM_HEADLESS = false
    SELENIUM_BROWSER = chrome
    SELENIUM_TIMEOUT = 10
    SELENIUM_IMPLICIT_WAIT = 5